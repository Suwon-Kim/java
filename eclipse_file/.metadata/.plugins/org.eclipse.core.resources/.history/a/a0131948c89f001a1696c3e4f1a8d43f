package kr.ac.green;

import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.File;

import javax.swing.JButton;
import javax.swing.JComponent;
import javax.swing.JFileChooser;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTextArea;
import javax.swing.JTextField;
import javax.swing.border.LineBorder;
import javax.swing.border.TitledBorder;

public class FileCopy extends JFrame {
	
	private int fileInputSize = 20;
	
	private JTextField tfSrc;
	private JTextField tfCopy;
	
	private JButton btnSrc;
	private JButton btnCopy;
	
	private JTextField tfSize;
	
	private JFileChooser chooser;
	
	private JButton btnRun;
	
	private JTextArea taResult;
	
	private File srcFile;
	private File copyFile;
	
	public FileCopy() {
		init();
		setDisplay();
		addListeners();
		showFrame();
	}
	
	
	private void init() {
		tfSrc = new JTextField(fileInputSize);
		tfSrc.setEditable(false);
		tfSrc.setBorder(new LineBorder(Color.GRAY, 1));
		tfCopy = new JTextField(fileInputSize);
		tfCopy.setBorder(new LineBorder(Color.GRAY, 1));
		tfCopy.setEditable(false);
		
		btnSrc = new JButton("선택");
		btnCopy = new JButton("선택");
		
		tfSize = new JTextField(25);
		tfSize.setHorizontalAlignment(JTextField.CENTER);
		
		btnRun = new JButton("복사");
		

		
		taResult = new JTextArea(6,25);	//6줄 25칸
		taResult.setEditable(false);
		
		//어디에서 넣을껀지 경로를 써준다 파라미터에
		chooser = new JFileChooser("c:\\");
		
	
		
	}

	private void setDisplay() {
		JPanel pnlNorth = new JPanel(new GridLayout(0, 1));
		
		JPanel pnlSrc = new JPanel();
		pnlSrc.add(tfSrc);
		pnlSrc.add(btnSrc);
		
		setTitledBorder(pnlSrc, "원본정보");
		
		JPanel pnlCopy = new JPanel();
		pnlCopy.add(tfCopy);
		pnlCopy.add(btnCopy);
		setTitledBorder(pnlCopy, "복사본정보");
		
		pnlNorth.add(pnlSrc);
		pnlNorth.add(pnlCopy);
		
		JPanel pnlCenter = new JPanel(new BorderLayout());
		JPanel pnlSize = new JPanel();
		pnlSize.add(tfSize);
		setTitledBorder(pnlSize, "버퍼크기");
		
		JPanel pnlRun = new JPanel();
		pnlRun.add(btnRun);
		
		JScrollPane scroll = new JScrollPane(taResult);
		setTitledBorder(scroll, "실행결과");
		
		pnlCenter.add(pnlSize, BorderLayout.NORTH);
		pnlCenter.add(pnlRun, BorderLayout.CENTER);
		pnlCenter.add(scroll, BorderLayout.SOUTH);
		
		add(pnlNorth, BorderLayout.NORTH);
		add(pnlCenter, BorderLayout.CENTER);
		
	}
	
	private void setTitledBorder(JComponent cmp, String title) {
		cmp.setBorder(new TitledBorder(new LineBorder(Color.GRAY, 1), title));
	}

	private void addListeners() {
		ActionListener aListener = new ActionListener() {
			@Override
			public void actionPerformed(ActionEvent ae) {
				Object src = ae.getSource();
				if(src == btnSrc) {
					selectSrc();
				} else if(src == btnCopy) {
					selectCopy();
				} else {
					copy();
				}
			}
		};
		
		btnSrc.addActionListener(aListener);
		btnCopy.addActionListener(aListener);
		btnRun.addActionListener(aListener);
		
	}


	private void showFrame() {
		setTitle("파일복사");
		pack();
		setLocationRelativeTo(null);
		setDefaultCloseOperation(EXIT_ON_CLOSE);
		setVisible(true);
	}
	
	private void selectSrc() {
		int result = chooser.showOpenDialog(this);
		
		//파일선택하고 확인 눌렀을 때가 APPROVE_OPTION
		if(result == JFileChooser.APPROVE_OPTION) {
			srcFile = chooser.getSelectedFile();	//선택한 파일객체가 넘어온다.
			tfSrc.setText(srcFile.getPath());
		}
		
	}
	private void selectCopy() {
		int result = chooser.showSaveDialog(this);
		if(result == JFileChooser.APPROVE_OPTION) {
			copyFile = chooser.getSelectedFile();
			tfCopy.setText(copyFile.getPath());
		}
	}
	private void copy() {
		
	}
 	public static void main(String[] args) {
		new FileCopy();
	}
}
